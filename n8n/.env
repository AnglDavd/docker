# ------------------------------------------------------------------------------
# n8n Environment Variables Configuration
#
# This file defines environment variables for the n8n Docker Compose setup.
# These variables are crucial for configuring database connections, n8n behavior,
# and external services like Redis and SMTP.
#
# IMPORTANT: Replace all placeholder values (e.g., 'your_domain.com', 'n8n_password')
# with your actual, secure credentials and domain information.
# ------------------------------------------------------------------------------

# How to generate secure passwords:
# Linux/macOS: openssl rand -hex 32
# Windows (PowerShell): (32 | ForEach-Object { -join ((48..57) + (65..90) + (97..122) | Get-Random -Count $_ | ForEach-Object {[char]$_}) })
# Online password generators are also an option.

# Database credentials for PostgreSQL service
POSTGRES_DB=n8n             # Name of the PostgreSQL database
POSTGRES_USER=n8n           # Username for the PostgreSQL database
POSTGRES_PASSWORD=n8n_password # üö® IMPORTANT: Change this to a strong, unique password!

# n8n specific settings and internal database connection details
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true # Recommended: Enforce correct permissions for n8n settings file
N8N_RUNNERS_ENABLED=true                   # Enable n8n's workflow runners for improved performance
DB_POSTGRESDB_PASSWORD=n8n_password        # üö® IMPORTANT: This must match the POSTGRES_PASSWORD above.
DB_TYPE=postgresdb                         # Database type used by n8n (PostgreSQL)
DB_POSTGRESDB_HOST=db                      # Hostname of the PostgreSQL service (as defined in compose.yaml)
DB_POSTGRESDB_DATABASE=n8n                 # Database name used by n8n
DB_POSTGRESDB_USER=n8n                     # Database username used by n8n
GENERIC_TIMEZONE=Europe/Berlin             # üåç Adjust timezone for n8n's internal operations (e.g., America/Santiago)
N8N_HOST=your_domain.com                   # üåê Replace with your n8n public domain (e.g., n8n.example.com)
N8N_PROTOCOL=https                         # Use 'https' for production environments for secure communication
WEBHOOK_URL=https://your_domain.com/       # üîó Replace with your n8n public URL. This is crucial for webhooks to function correctly.

# Redis Configuration for queue management and caching
QUEUE_HEALTH_CHECK_ACTIVE=true             # Enable health checks for the Redis queue
QUEUE_BULL_REDIS_HOST=redis                # Hostname of the Redis service (as defined in compose.yaml)
QUEUE_BULL_REDIS_PORT=6379                 # Port for the Redis service

# Worker Configuration for scaling n8n workflows
N8N_RUNNERS_MODE_MAIN=queue                # Set to 'queue' for the main n8n instance to use the queue system
N8N_RUNNERS_MODE_WORKER=worker             # Set to 'worker' for dedicated worker instances
N8N_RUNNERS_BROKER_URL=redis://redis:6379  # URL for the Redis broker, used by runners
N8N_RUNNERS_MAX_CONCURRENCY=5              # Maximum concurrent workflows a worker can process

# Base path for n8n data volumes (uploads, custom files)
N8N_DATA_BASE=/media/data/n8n # üìÇ Base directory on the host for n8n's persistent data

# Email notifications (example configuration for SMTP)
# Uncomment and configure these variables to enable email notifications from n8n.
# N8N_EMAIL_MODE=smtp
# N8N_SMTP_HOST=smtp.example.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=user@example.com
# N8N_SMTP_PASS=smtp_password # üö® IMPORTANT: Replace with your SMTP password!
# N8N_SMTP_SENDER=user@example.com
# N8N_SMTP_SSL=true

# Basic Authentication for n8n UI (optional, but recommended for security)
# Uncomment and set strong credentials to protect your n8n instance.
# N8N_BASIC_AUTH_USER=your_username # üë§ Choose a strong username
# N8N_BASIC_AUTH_PASSWORD=your_password # üîë Choose a strong password